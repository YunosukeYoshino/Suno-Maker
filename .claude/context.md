# Project Context

## プロジェクト概要
「suno-maker」は、AI音楽生成のためのインテリジェントプロンプト＆歌詞作成ツールです。TypeScript と Tailwind CSS v4 で構築された Next.js 15 アプリケーションで、DDD（ドメイン駆動設計）+ TDD（テスト駆動開発）アーキテクチャを採用しています。

**Phase 1-3 完了済み**: 基盤構築 → コア機能 → 高度機能の段階的実装により、プロダクトグレードの品質を実現。

## 主要な技術スタック
- **フレームワーク**: Next.js 15 (App Router + Turbopack)
- **言語**: TypeScript 5 (厳密モード、`any`型0個)
- **スタイリング**: Tailwind CSS v4 + shadcn/ui
- **パッケージマネージャー**: Bun (必須、npm/yarn禁止)
- **開発ツール**: Turbopack, Biome (ESLint+Prettier代替)
- **テストフレームワーク**: Vitest + jsdom + React Testing Library
- **状態管理**: Zustand + Zod validation
- **品質管理**: 151テスト全通過、ドメイン層100%カバレッジ

## プロジェクト完成状況
**✅ Phase 1-3 全完了** (2024年12月完成)

### 実装済み機能
- **インテリジェントプロンプトジェネレーター**: 232ジャンル、25ムード、70+楽器対応
- **歌詞最適化エンジン**: 構造タグ自動挿入、日本語最適化、3000文字制限管理
- **プロンプト最適化**: 120文字最適化、ジャンル競合検出、成功率予測
- **テンプレートライブラリ**: 25+プロフェッショナルテンプレート、4カテゴリ分類
- **成功事例データベース**: 高評価プロンプト収集・分析システム
- **コンプライアンスチェック**: 著作権・安全性検証機能

### 技術的達成項目
- **151テスト全通過**: ドメイン層147 + アプリケーション層41 + プレゼンテーション層7
- **TypeScript厳密モード**: `any`型完全排除、型安全性100%
- **DDD設計完全実装**: 4層アーキテクチャ、不変オブジェクト設計
- **TDD開発手法確立**: Red-Green-Refactorサイクル、継続的品質向上

## アーキテクチャ制約・設計原則
- **DDD (ドメイン駆動設計)**: 責務の明確化、ビジネスロジックの分離
- **TDD (テスト駆動開発)**: 品質ファースト、設計品質向上
- **Clean Architecture**: 依存関係の方向制御、テスタビリティ最優先
- **不変オブジェクト設計**: 副作用防止、テスト安定性確保

## 開発制約・重要なルール（Phase 3完了により確立）
1. **必須**: Bun を使用 (npm/yarn 禁止)
2. **必須**: Biome を使用 (ESLint/Prettier 禁止)
3. **必須**: shadcn/ui コンポーネントは `/components/ui/` に配置
4. **必須**: 各機能開発は専用ブランチで実施
5. **必須**: TDD サイクル (Red → Green → Refactor) を厳守
6. **必須**: DDD 層分離を遵守
7. **必須**: TypeScript厳密モード、`any`型使用禁止
8. **必須**: 包括的バリデーション、エラー予防設計
9. **必須**: 不変オブジェクト設計による副作用防止

## プロジェクト構造（Phase 3完了版）
```
src/
├── domain/                    # ドメイン層（ビジネスロジック）
│   ├── entities/              # 5エンティティ（79テスト）
│   ├── valueObjects/          # 5値オブジェクト（68テスト）
│   └── repositories/          # 5リポジトリインターフェース
├── application/               # アプリケーション層（ユースケース）
│   ├── usecases/              # 6ユースケース（26テスト）
│   └── services/              # 3サービス（15テスト）
├── infrastructure/            # インフラ層（外部依存）
│   ├── repositories/          # リポジトリ実装
│   └── external/              # 外部API
└── presentation/              # プレゼンテーション層（UI）
    ├── components/            # 7コンポーネント（7テスト）
    └── hooks/                 # React Hooks
```

## 品質管理基準（Phase 3確立）
```bash
# 必須品質チェック
bun run check      # Biome品質チェック 100%通過
bun run typecheck  # TypeScript型チェック エラー0件  
bun test           # 151テスト全通過
bun run build      # ビルド成功

# 品質指標
# - `any`型使用数: 0個
# - テストカバレッジ: ドメイン層100%、アプリケーション層95%
# - ランタイムエラー: 0件
# - Biome品質チェック: 100%通過
# - パフォーマンス: 全テスト10秒以内実行
```

## 重要な設定ファイル
- `biome.json` - コードフォーマット・リンティング設定
- `components.json` - shadcn/ui 設定
- `vitest.config.ts` - テスト設定（151テスト管理）
- `CLAUDE.md` - Claude Code 向け詳細指示
- `utils/generateUUID.ts` - UUID生成統一ユーティリティ

## 将来展望（Phase 4構想）
- 機械学習による成功率予測システム
- リアルタイム最適化エンジン
- ユーザー行動分析システム
- 自動品質向上アルゴリズム